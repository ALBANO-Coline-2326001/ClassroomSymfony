{# On imagine que tu as une grid bootstrap autour, sinon ajoute <div class="row"> #}

{% for c in cours %}
    {# On ajoute une colonne pour que les cartes ne soient pas géantes #}
    <div class="col-md-4 mb-4">
        <div class="card h-100"> <div class="card-body">
                <h5 class="card-title fw-bold mb-1">{{ c.title }}</h5>

                <p class="text-muted small mb-3">
                    <i class="fas fa-chalkboard-teacher me-1"></i> Prof. {{ c.teacher.lastName }}
                </p>

                <div class="d-grid gap-2">
                    {% if app.user %}
                        {# --- CAS CONNECTÉ --- #}

                        <a href="{{ path('app_cours_show', {'id': c.id}) }}" class="btn btn-outline-primary btn-sm fw-bold">
                            <i class="fas fa-eye me-1"></i> Accéder au contenu
                        </a>

                        <a href="#" class="btn btn-primary btn-sm fw-bold">
                            <i class="fas fa-pen me-1"></i> Passer le QCM
                        </a>

                        {% if is_granted('ROLE_TEACHER') %}
                            <button class="btn btn-success text-white btn-sm fw-bold">
                                <i class="fas fa-robot me-1"></i> Générer QCM (IA)
                            </button>
                        {% endif %}

                    {% else %}
                        {# --- CAS NON CONNECTÉ --- #}
                        <div class="alert alert-light text-center border mb-0 p-2">
                            <i class="fas fa-lock text-muted mb-1"></i><br>
                            <small class="text-muted">Connectez-vous pour accéder.</small>
                        </div>
                        <a href="{{ path('app_login') }}" class="btn btn-secondary btn-sm opacity-75">
                            Se connecter
                        </a>
                    {% endif %}
                </div>
            </div>

        </div>
    </div>
{% else %}
    <p>Aucun cours disponible pour le moment.</p>
{% endfor %}